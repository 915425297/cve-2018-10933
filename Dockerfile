FROM base/archlinux
ADD libssh-0.8.3.tar.xz /root
ADD libSSH-Authentication-Bypass /root
RUN pacman -Syu &&\
pacman -S net-tools vim python-paramiko openssh make gcc gdb cmake --noconfirm &&\
cd /root/libssh-0.8.3 &&\
mkdir build &&\
cd build &&\
cmake .. &&\
make &&\
make install &&\
cd examples &&\
make &&\
ssh-keygen -t dsa -f ssh_host_dsa_key -N '' &&\
ssh-keygen -t rsa -b 2048 -f ssh_host_rsa_key -N '' 
EXPOSE 22
CMD ["/root/libssh-0.8.3/build/examples/samplesshd-cb -d /root/libssh-0.8.3/build/examples/ssh_host_dsa_key -k /root/libssh-0.8.3/build/examples/ssh_host_rsa_key 0.0.0.0"]
